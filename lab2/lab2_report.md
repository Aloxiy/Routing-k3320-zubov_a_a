**Группа:** K3320  
**Автор:** Зубов Алексей Андреевич  
**Лабораторная работа:** Lab2

---

### **Задание**

Требуется построить сеть связи для трёх географически распределённых офисов компании «RogaIKopita Games».

<img src="images/task.png" width=500px>

В рамках работы необходимо:
- Развернуть все устройства, указанные на схеме, и настроить соединения между ними.
- Назначить IP-адреса интерфейсам.
- Развернуть DHCP-серверы на маршрутизаторах для клиентских устройств.
- Настроить статическую маршрутизацию.
- Настроить имена устройств и заменить стандартные учётные данные (логины и пароли).

---

### **Схема сети**

Схема, разработанная в draw.io:  
<img src="images/graph-1.png" width=500px>

Схема, отображённая в ContainerLab:  
<img src="images/graph-2.png" width=500px>

---

### **Конфигурация YAML**

Конфигурационный файл для ContainerLab похож на файл из предыдущей лабораторной работы, однако добавлен ещё один компьютер, а также изменены соединения между устройствами. Каждый маршрутизатор подключён к своему компьютеру через интерфейс `eth3`, а для связи между собой используются интерфейсы `eth1` и `eth2`.

---

### **Конфигурация устройств**

#### **Маршрутизаторы**

В данной работе вместо настройки VLAN требуется прописать статические маршруты. Настройка DHCP аналогична конфигурации маршрутизатора R01 из предыдущей лабораторной.

Конфигурация каждого маршрутизатора включает:
1. Настройку IP-адресов на трёх портах (адрес в сторону компьютера: `10.x.0.1/16`).
2. Создание пула IP-адресов (`/ip pool`).
3. Настройку DHCP-сервера (`/ip dhcp-server`).
4. Определение DHCP-сети (`/ip dhcp-server network`).
5. Добавление статических маршрутов до сетей других маршрутизаторов (`/ip route`).
6. Создание нового пользователя (`aloxiy`) и удаление учётной записи `admin` (`/user`).
7. Установку имени устройства (`/system identity`).

#### **Компьютеры**

Компьютеры получают IP-адреса через DHCP командой `udhcpc -i eth1`.  
Возникла проблема: ContainerLab автоматически добавляет маршрут по умолчанию через сеть управления, что мешает корректной маршрутизации между офисами. Для решения на этапе запуска удаляется этот маршрут:  
`ip route del default via 172.16.16.1 dev eth0`  
При необходимости его можно вернуть, указав более низкий приоритет (большее значение `metric`).

---

### **Результаты**

#### **Работа DHCP-серверов**

<img src="images/dhcpmsk.png" width=500px>

<img src="images/dhcpfrt.png" width=500px>

<img src="images/dhcpbrl.png" width=500px>

#### **Связность между маршрутизаторами**

<img src="images/r01msk.png" width=500px>

<img src="images/r01frt.png" width=500px>

<img src="images/r01brl.png" width=500px>

#### **Связность между компьютерами**

<img src="images/pc1.png" width=500px>

---

### **Заключение**

В ходе работы были успешно развёрнуты все устройства, настроены IP-адреса на интерфейсах, развёрнуты DHCP-серверы для клиентских устройств и настроена статическая маршрутизация.

Цель лабораторной работы — построение сети связи для трёх географически распределённых офисов компании «RogaIKopita Games» — выполнена.
